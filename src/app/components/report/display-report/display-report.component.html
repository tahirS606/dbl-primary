<div class="watermark-container-large">


    <div class="watermark-container">
        <div *ngIf="isLoading">
            <mat-spinner></mat-spinner>
        </div>
    </div>

    <div *ngIf="report" class="report-container">


        <h1>Report for {{report?.date | date }}</h1>


        <div share-button-container>

            <share-buttons [theme]="'modern-dark'" [include]="['email','copy']" [show]="5" [size]="2
" [title]="'Someone has shared a DBL visit report with you.'" [description]="'Please view it at the link below.'" [url]="url"></share-buttons>
        </div>

        <div class='address-details'>
            <div class="item">
                <span class="primary strong">Name:</span> {{ report?.propertyName | titlecase}}
            </div>
            <div class="item">
                <span class="strong primary"> Address: </span> {{report?.propertyAddress | slice:0:-5}}
            </div>

            <div>
                <span class="strong primary">Completed At: </span>{{report?.time | date:"shortTime" }}
            </div>
        </div>


        <mat-accordion>
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <div>
                            <p class="centered primary strong">Map of Services Performed</p>
                        </div>
                    </mat-panel-title>
                    <mat-panel-description>
                    </mat-panel-description>
                </mat-expansion-panel-header>
                <agm-map #map id="map" [latitude]='latitude' [longitude]='longitude' [zoom]='mapZoom' [mapTypeId]="'hybrid'" (mapReady)="onMapReady($event)" [fullscreenControl]="false" [zoomControl]="true" [mapDraggable]="false" [disableDefaultUI]="true" gestureHandling="none"
                    [clickableIcons]="false">

                    <!-- <agm-polygon *ngFor='let polygon of polygons' [paths]='polygons'></agm-polygon> -->



                </agm-map>

                <div *ngFor=' let polygon of polygons '>{{polygon | json}}</div>

            </mat-expansion-panel>
        </mat-accordion>



        <div class="collection-container">
            <div *ngFor="let area of report?.areasForReport">
                <div [ngStyle]="{'background-color': area.color}" class="collection">
                    <div><span class="strong">Time: </span> {{area.time | date:"shortTime"}}</div>

                    <div *ngFor="let task of area.tasks">
                        <p>{{task}}</p>
                        <ul>
                            <span *ngFor="let task of task.tasks">
                        <li>{{task}}</li></span>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="images">
            <div *ngFor="let image of report?.imagePreviewArray">
                <div class="frame" style="background-image: url('{{image}} ')"></div>
            </div>
        </div>


        Lat: {{this.latitude}} Long: {{this.longitude}}
    </div>


</div>