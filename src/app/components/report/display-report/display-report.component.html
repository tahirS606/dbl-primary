<div class="watermark-container">
    <div *ngIf="isLoading">
        <mat-spinner></mat-spinner>
    </div>
</div>

<div *ngIf="report" class="report-container">
    <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <div>
                        <p class="centered primary strong">Map of Services Performed</p>
                    </div>
                </mat-panel-title>
                <mat-panel-description>
                </mat-panel-description>
            </mat-expansion-panel-header>
            <agm-map #map id="map" [latitude]='latitude' [longitude]='longitude' [zoom]='mapZoom' [mapTypeId]="'hybrid'" (mapReady)="onMapReady($event)" [fullscreenControl]="false" [zoomControl]="false" [mapDraggable]="false" [disableDefaultUI]="true" gestureHandling="none"
                [clickableIcons]="false">
            </agm-map>
        </mat-expansion-panel>
    </mat-accordion>

    <div class="title-with-share">
        <h1>Report for {{report?.date | date }}</h1>
    </div>
    <!-- <mat-icon>share</mat-icon> -->



    <div><span class="primary strong">Name:</span> {{report?.propertyName}}</div>
    <div>
        <span class="strong primary">Address:</span> {{report?.propertyAddress}}</div>

    <span class="strong primary">Completed At:</span>{{report?.time | date:"shortTime" }}

    <!-- <h2>Services:</h2> -->

    <div class="collection-container">
        <div *ngFor="let area of report?.areasForReport">
            <div [ngStyle]="{'background-color': area.color}" class="collection">
                <div><span class="strong">Time: </span> {{area.time | date:"shortTime"}}</div>

                <div *ngFor="let task of area.tasks">
                    <p>{{task}}</p>
                    <ul>
                        <span *ngFor="let task of task.tasks">
                        <li>{{task}}</li></span>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <p>Creator: {{report?.creator}}</p>

    <!-- <div>
        <h2 *ngIf="report?.imagePreviewArray.length ==1">Image</h2>
        <h2 *ngIf="report?.imagePreviewArray.length >1">Images</h2>
    </div>
    <div class="images">
        <div *ngFor="let image of report?.imagePreviewArray">
            <div class="frame" style="background-image: url('{{image}}')"></div>
        </div>
    </div> -->

    <h1>Share Report</h1>

    <share-buttons [theme]="'modern-light'" [include]="['linkedin','telegram','messenger','sms','email','print','copy']" [show]="5" [showText]="true" [size]="2
" [title]="'Share buttons'" [description]="'share buttons'" [url]="url"></share-buttons>

</div>