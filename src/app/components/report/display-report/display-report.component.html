<div *ngIf="isLoading">
    <mat-spinner></mat-spinner>
</div>

<div *ngIf="report" class="report-container">

    <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <div>
                        <p class="centered primary strong">Map of Services Performed</p>
                    </div>
                </mat-panel-title>
                <mat-panel-description>
                </mat-panel-description>
            </mat-expansion-panel-header>
            <agm-map #map [latitude]="latitude" [longitude]="longitude" [zoom]="mapZoom"></agm-map>
        </mat-expansion-panel>
    </mat-accordion>


    <h1>Report for {{report?.date | date }}</h1>



    <div><span class="primary strong">Name:</span> {{report?.propertyName}}</div>
    <div>
        <span class="strong primary">Address:</span> {{report?.propertyAddress}}</div>

    <span class="strong primary">Time:</span>{{report?.time | date:"shortTime" }}

    <h2>Services:</h2>

    <div class="collection-container">
        <div *ngFor="let area of report?.areasForReport">
            <div [ngStyle]="{'background-color': area.color}" class="collection">
                <div><span class="strong">Time: </span> {{area.time | date:"shortTime"}}</div>

                <div *ngFor="let task of area.tasks">
                    <p>{{task}}</p>
                    <ul>
                        <span *ngFor="let task of task.tasks">
                        <li>{{task}}</li></span>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <p>Creator: {{report?.creator}}</p>

    <p>Latitude: {{report?.propertyLatitude}}</p>
    <p>Longitude {{report?.propertyLongitude}}</p>


    <div>
        <h2 *ngIf="report?.imagePreviewArray.length ==1">Image</h2>
        <h2 *ngIf="report?.imagePreviewArray.length >1">Images</h2>
    </div>
    <div class="images">
        <div *ngFor="let image of report?.imagePreviewArray">
            <div class="frame" style="background-image: url('{{image}}')"></div>
        </div>
    </div>




</div>