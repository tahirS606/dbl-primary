<!-- <mat-icon routerLink="" color="primary">
    arrow_back_ios</mat-icon> -->
<div #mapCapture>
    <agm-map #map id="map" [zoom]='zoom' [latitude]='latitude' [longitude]='longitude' [mapTypeId]="'hybrid'" [maxZoom]="maxZoom" [minZoom]="minZoom" (mapReady)="onMapReady($event)" [fullscreenControl]="fullscreenControl" [zoomControl]="zoomControl" [rotateControl]="true"
        [scaleControl]="scaleControl" [streetViewControl]="streetViewControl">
    </agm-map>
</div>

<mat-card-content displayFlx>

    <mat-card class="check-box-card" *ngIf="checkboxVisible">
        <mat-icon (click)="showCheckbox()">close</mat-icon>
        <mat-card-title class='centered'>
            <h1>Services</h1>
        </mat-card-title>
        <form (ngSubmit)="addTasks();" [formGroup]="form">
            <label formArrayName="tasks" *ngFor="let tasks of tasksArray.controls; let i=index">
            <mat-checkbox [formControlName]="i">  
              {{webData[i].name}}
            </mat-checkbox>
            <br/>
          </label>
            <br/>
            <button type=submit mat-button color='primary' class="btn btn-success" class="centered" (click)="showCheckbox()" (click)="addTaskstoArea()" [disabled]>Add</button>
        </form>
    </mat-card>
</mat-card-content>

<mat-action-row displayFlx>
    <button (click)="addTasks()" [disabled]="!addTasksToAreaButtonShowing" color="primary" mat-button>Add Services</button>
    <button type="button" mat-button color="primary" (click)="filePicker.click()">
        Add image
    </button>
    <button color="primary" mat-button color="warn" [disabled]='!polygonComplete' (click)="clearMap()">Clear All</button>
    <button mat-button (click)="geolocate()">Geolocate</button>

</mat-action-row>

<input (change)="onImagePicked($event)" hidden type="file" #filePicker>

<h1 class="title" *ngIf="reportData || imagePreviewArray">Report for {{date | date}}</h1>

<!-- <h3 class="title">Property:</h3> -->
<app-property-detail>
</app-property-detail>

<h2 *ngIf="reportData" class="title">Services</h2>

<div class="collection-container">
    <div *ngFor="let area of reportData">
        <div [ngStyle]="{'color': area.color}" class="collection">
            <div><span class="strong">Name: </span> {{area.name | json}}</div>
            <div><span class="strong">Time: </span>{{area.time | date:'shortTime'}}</div>
            <span class="strong">Services:</span>
            <ul>
                <span *ngFor="let task of area.tasks"> 
                    <li>{{task}}</li></span>
            </ul>

        </div>
    </div>
</div>


<div class="title">
    <h2 *ngIf="imagePreviewArray.length ==1">Image</h2>
    <h2 *ngIf="imagePreviewArray.length >1">Images</h2>
</div>
<div class="images">
    <div *ngFor="let image of imagePreviewArray">
        <div class="frame" style="background-image: url('{{image}}')"></div>
    </div>
</div>

<mat-action-row displayFlx>
    <button class="submit-button" (click)="onSaveReport()" mat-raised-button [disabled]="!readyToSave" color="primary">Submit Report</button>
</mat-action-row>